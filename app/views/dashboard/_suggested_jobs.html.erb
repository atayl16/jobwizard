<% if job_postings.any? %>
  <div class="space-y-2 max-h-96 overflow-y-auto">
    <% job_postings.each do |job| %>
      <% matcher = JobWizard::JobMatcher.new %>
      <% reasons = matcher.match_reasons(job) %>
      <div id="job_<%= job.id %>" class="border border-gray-200 rounded-lg p-3 hover:border-blue-300 transition-colors">
        <div class="flex items-start justify-between gap-3">
          <div class="flex-1 min-w-0">
            <h3 class="font-semibold text-gray-900 truncate"><%= job.company %></h3>
            <p class="text-sm text-gray-600 truncate"><%= job.title %></p>
            
            <!-- Match reasons -->
            <% if reasons.any? %>
              <div class="mt-1">
                <% reasons.each do |reason| %>
                  <span class="inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800 mr-1 mb-1">
                    ‚úì <%= reason %>
                  </span>
                <% end %>
              </div>
            <% end %>
            
            <div class="flex items-center gap-2 mt-1">
              <% if job.remote? %>
                <span class="inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-green-100 text-green-800">
                  üåç Remote
                </span>
              <% end %>
              <% if job.posted_at %>
                <span class="text-xs text-gray-500">
                  <%= time_ago_in_words(job.posted_at) %> ago
                </span>
              <% end %>
            </div>
          </div>
          
          <%= button_to 'Generate', tailor_job_path(job), method: :post, class: 'flex-shrink-0 bg-purple-600 hover:bg-purple-700 text-white text-xs font-medium px-3 py-1.5 rounded transition-colors', data: { turbo_frame: "job_#{job.id}" } %>
        </div>
      </div>
    <% end %>
  </div>
<% else %>
  <div class="text-center py-8 text-gray-500">
    <svg class="empty-state-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2 2v2m4 6h.01M5 20h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path>
    </svg>
    <p class="text-sm">No matching jobs found</p>
    <p class="text-xs mt-1">Try adding more companies with <code class="bg-gray-100 px-2 py-0.5 rounded">rake jobs:fetch</code></p>
  </div>
<% end %>

