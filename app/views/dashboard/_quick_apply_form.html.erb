<%= form_with url: quick_create_applications_path, method: :post, data: { controller: 'jd-parser', turbo_frame: 'flash-messages' } do |f| %>
  <div class="space-y-4">
    <!-- Job Description Textarea -->
    <div>
      <label for="job_description" class="block text-sm font-medium text-gray-700 mb-2">
        Job Description
      </label>
      <%= text_area_tag :job_description, '', 
          rows: 8,
          class: 'w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none font-mono text-sm',
          placeholder: 'Paste the full job description here...',
          data: { 
            jd_parser_target: 'description',
            action: 'input->jd-parser#parse'
          } %>
      <p class="mt-1 text-xs text-gray-500">Or upload a file below</p>
    </div>

    <!-- File Upload -->
    <div>
      <%= file_field_tag :job_description_file,
          accept: '.txt,.pdf,.doc,.docx',
          class: 'block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100' %>
    </div>

    <!-- Extracted Fields Row -->
    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
      <div>
        <label for="company" class="block text-sm font-medium text-gray-700 mb-2">
          Company <span class="text-gray-400 font-normal">(auto-detected)</span>
        </label>
        <%= text_field_tag :company, '', 
            class: 'w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent',
            placeholder: 'Company Name',
            data: { jd_parser_target: 'company' } %>
      </div>

      <div>
        <label for="role" class="block text-sm font-medium text-gray-700 mb-2">
          Role <span class="text-gray-400 font-normal">(auto-detected)</span>
        </label>
        <%= text_field_tag :role, '', 
            class: 'w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent',
            placeholder: 'Job Title',
            data: { jd_parser_target: 'role' } %>
      </div>
    </div>

    <!-- Submit Button -->
    <div class="flex justify-end">
      <%= button_tag type: 'submit', class: 'bg-blue-600 hover:bg-blue-700 text-white font-semibold px-8 py-3 rounded-lg transition-colors flex items-center gap-2 text-base' do %>
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
        </svg>
        Generate PDFs
      <% end %>
    </div>
  </div>
<% end %>





