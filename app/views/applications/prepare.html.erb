<div class="max-w-4xl mx-auto py-8 px-4">
  <div class="mb-6">
    <h1 class="text-3xl font-bold text-gray-900 mb-2">Review Skills</h1>
    <p class="text-gray-600">Review and select which skills to include in your application documents.</p>
  </div>

  <!-- Summary Header -->
  <div class="bg-white rounded-xl shadow-sm p-6 border border-gray-200 mb-6">
    <h2 class="text-xl font-semibold text-gray-900 mb-4">Application Summary</h2>
    
    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">Company</label>
        <input type="text" value="<%= @company %>" readonly class="w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-50 text-gray-600">
      </div>
      
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">Role</label>
        <input type="text" value="<%= @role %>" readonly class="w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-50 text-gray-600">
      </div>
    </div>

    <div class="bg-blue-50 border border-blue-200 rounded-lg p-4">
      <p class="text-sm text-blue-700">
        <span class="font-semibold">✓ Verified Skills:</span> <%= @verified_skills.count %> skills from your experience
        <br>
        <span class="font-semibold">⚠️ Unverified Skills:</span> <%= @unverified_skills.count %> skills mentioned in JD but not in your profile
      </p>
    </div>
  </div>

  <%= form_with url: finalize_applications_path, method: :post, class: "space-y-6" do |f| %>
    <!-- Verified Skills Section -->
    <% if @verified_skills.any? %>
      <div class="bg-white rounded-xl shadow-sm p-6 border border-gray-200">
        <h3 class="text-lg font-semibold text-gray-900 mb-4 flex items-center">
          <span class="text-green-600 mr-2">✓</span>
          Verified Skills (<%= @verified_skills.count %>)
        </h3>
        <p class="text-sm text-gray-600 mb-4">These skills are in your experience profile and will be included by default.</p>
        
        <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3">
          <% @verified_skills.each do |skill| %>
            <label class="flex items-center p-3 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer">
              <%= check_box_tag "verified_skills[]", skill, true, class: "mr-2 text-green-600 focus:ring-green-500" %>
              <span class="text-sm font-medium text-gray-900"><%= skill %></span>
            </label>
          <% end %>
        </div>
      </div>
    <% end %>

    <!-- Unverified Skills Section -->
    <% if @unverified_skills.any? %>
      <div class="bg-white rounded-xl shadow-sm p-6 border border-gray-200">
        <h3 class="text-lg font-semibold text-gray-900 mb-4 flex items-center">
          <span class="text-orange-600 mr-2">⚠️</span>
          Unverified Skills (<%= @unverified_skills.count %>)
        </h3>
        <p class="text-sm text-gray-600 mb-4">
          These skills are mentioned in the job description but not in your experience profile. 
          <span class="font-semibold text-orange-700">They will be marked as "not-claimed" if selected.</span>
        </p>
        
        <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3">
          <% @unverified_skills.each do |skill| %>
            <label class="flex items-center p-3 border border-orange-200 rounded-lg hover:bg-orange-50 cursor-pointer">
              <%= check_box_tag "unverified_skills[]", skill, false, class: "mr-2 text-orange-600 focus:ring-orange-500" %>
              <span class="text-sm font-medium text-gray-900"><%= skill %></span>
            </label>
          <% end %>
        </div>
      </div>
    <% end %>

    <!-- Action Buttons -->
    <div class="flex justify-between items-center pt-6 border-t border-gray-200">
      <%= link_to "← Back", new_application_path, class: "px-6 py-3 text-gray-600 hover:text-gray-800 font-medium transition-colors" %>
      
      <div class="flex gap-3">
        <%= f.submit "✨ Generate Documents", class: "px-8 py-3 bg-blue-600 text-white font-bold rounded-lg hover:bg-blue-700 focus:ring-4 focus:ring-blue-300 transition-colors cursor-pointer shadow-lg" %>
      </div>
    </div>
  <% end %>
</div>
